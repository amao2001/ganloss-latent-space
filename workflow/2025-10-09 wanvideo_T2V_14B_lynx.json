{
	"last_link_id":153,
	"nodes":[
		{
			"mode":0,
			"outputs":[
				{
					"name":"IMAGE",
					"links":[
						120
					],
					"label":"IMAGE",
					"type":"IMAGE",
					"localized_name":"IMAGE"
				},
				{
					"name":"MASK",
					"label":"MASK",
					"type":"MASK",
					"localized_name":"MASK"
				}
			],
			"size":[
				335.2794494628906,
				475.0510559082031
			],
			"pos":[
				-504.767822265625,
				1056.1610107421875
			],
			"widgets_values":[
				"a3b28482c42cbb4b0f4d0a52f570c9cbd50554466d608ed85aaf4f88ccf60507.png",
				"image"
			],
			"inputs":[
				{
					"widget":{
						"name":"image"
					},
					"name":"image",
					"label":"image",
					"type":"COMBO",
					"localized_name":"image"
				},
				{
					"widget":{
						"name":"upload"
					},
					"name":"upload",
					"label":"upload",
					"type":"IMAGEUPLOAD",
					"localized_name":"choose file to upload"
				}
			],
			"flags":{
				
			},
			"id":35,
			"type":"LoadImage",
			"properties":{
				"cnr_id":"comfy-core",
				"ver":"0.3.59",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"LoadImage"
			},
			"order":0
		},
		{
			"outputs":[
				
			],
			"color":"#432",
			"widgets_values":[
				"Original implementation uses full ip layers with full ref layers, I don't know if there's some mistake in my implementation as the full ip adapter seems very weak, and using lite ip instead seems better, and also uses less memory."
			],
			"inputs":[
				
			],
			"flags":{
				
			},
			"type":"Note",
			"mode":0,
			"bgcolor":"#653",
			"size":[
				370.65289306640625,
				129.35208129882812
			],
			"pos":[
				-896.2048950195312,
				2.0979387760162354
			],
			"id":72,
			"properties":{
				"widget_ue_connectable":{
					
				}
			},
			"order":1
		},
		{
			"outputs":[
				
			],
			"color":"#432",
			"widgets_values":[
				"Model links:\n\n[https://huggingface.co/Kijai/WanVideo_comfy_fp8_scaled/tree/main/](https://huggingface.co/Kijai/WanVideo_comfy_fp8_scaled/tree/main/)\n\nLoRA:\n\n[https://huggingface.co/Kijai/WanVideo_comfy/tree/main/Lightx2v](https://huggingface.co/Kijai/WanVideo_comfy/tree/main/Lightx2v)\n\nText encoder:\n\n[https://huggingface.co/Kijai/WanVideo_comfy/blob/main/umt5-xxl-enc-bf16.safetensors](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/umt5-xxl-enc-bf16.safetensors)\n\nVAE:\n\n[https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan2_1_VAE_bf16.safetensors](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan2_1_VAE_bf16.safetensors)\n\nLynx models:\n\n[https://huggingface.co/Kijai/WanVideo_comfy/tree/main/Lynx](https://huggingface.co/Kijai/WanVideo_comfy/tree/main/Lynx)"
			],
			"inputs":[
				
			],
			"flags":{
				
			},
			"type":"MarkdownNote",
			"mode":0,
			"bgcolor":"#653",
			"size":[
				434.28240966796875,
				283.2594299316406
			],
			"pos":[
				-940.3956909179688,
				199.264892578125
			],
			"id":63,
			"properties":{
				"widget_ue_connectable":{
					
				}
			},
			"order":2
		},
		{
			"outputs":[
				{
					"name":"model",
					"links":[
						117
					],
					"label":"model",
					"type":"WANVIDEOMODEL",
					"localized_name":"model"
				}
			],
			"color":"#223",
			"widgets_values":[
				"Wan2_1-T2V-14B_fp8_e4m3fn_scaled_KJ.safetensors",
				"fp16_fast",
				"disabled",
				"offload_device",
				"sageattn",
				"default"
			],
			"inputs":[
				{
					"shape":7,
					"name":"compile_args",
					"label":"compile_args",
					"type":"WANCOMPILEARGS",
					"localized_name":"compile_args"
				},
				{
					"shape":7,
					"name":"block_swap_args",
					"label":"block_swap_args",
					"type":"BLOCKSWAPARGS",
					"localized_name":"block_swap_args"
				},
				{
					"shape":7,
					"name":"lora",
					"label":"lora",
					"type":"WANVIDLORA",
					"localized_name":"lora"
				},
				{
					"shape":7,
					"name":"vram_management_args",
					"label":"vram_management_args",
					"type":"VRAM_MANAGEMENTARGS",
					"localized_name":"vram_management_args"
				},
				{
					"shape":7,
					"name":"extra_model",
					"link":135,
					"label":"extra_model",
					"type":"VACEPATH",
					"localized_name":"extra_model"
				},
				{
					"shape":7,
					"name":"fantasytalking_model",
					"label":"fantasytalking_model",
					"type":"FANTASYTALKINGMODEL",
					"localized_name":"fantasytalking_model"
				},
				{
					"shape":7,
					"name":"multitalk_model",
					"label":"multitalk_model",
					"type":"MULTITALKMODEL",
					"localized_name":"multitalk_model"
				},
				{
					"shape":7,
					"name":"fantasyportrait_model",
					"label":"fantasyportrait_model",
					"type":"FANTASYPORTRAITMODEL",
					"localized_name":"fantasyportrait_model"
				},
				{
					"widget":{
						"name":"model"
					},
					"name":"model",
					"label":"model",
					"type":"COMBO",
					"localized_name":"model"
				},
				{
					"widget":{
						"name":"base_precision"
					},
					"name":"base_precision",
					"label":"base_precision",
					"type":"COMBO",
					"localized_name":"base_precision"
				},
				{
					"widget":{
						"name":"quantization"
					},
					"name":"quantization",
					"label":"quantization",
					"type":"COMBO",
					"localized_name":"quantization"
				},
				{
					"widget":{
						"name":"load_device"
					},
					"name":"load_device",
					"label":"load_device",
					"type":"COMBO",
					"localized_name":"load_device"
				},
				{
					"widget":{
						"name":"attention_mode"
					},
					"shape":7,
					"name":"attention_mode",
					"label":"attention_mode",
					"type":"COMBO",
					"localized_name":"attention_mode"
				},
				{
					"widget":{
						"name":"rms_norm_function"
					},
					"shape":7,
					"name":"rms_norm_function",
					"label":"rms_norm_function",
					"type":"COMBO",
					"localized_name":"rms_norm_function"
				}
			],
			"flags":{
				
			},
			"type":"WanVideoModelLoader",
			"mode":0,
			"bgcolor":"#335",
			"size":[
				609.2658081054688,
				318
			],
			"pos":[
				-25.02680778503418,
				33.078189849853516
			],
			"id":12,
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"37365817e82c3d6057fcb0a5d7f952f7376f096a",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"WanVideoModelLoader"
			},
			"order":29
		},
		{
			"outputs":[
				{
					"name":"block_swap_args",
					"links":[
						36
					],
					"label":"block_swap_args",
					"type":"BLOCKSWAPARGS",
					"localized_name":"block_swap_args"
				}
			],
			"color":"#223",
			"widgets_values":[
				35,
				false,
				false,
				true,
				0,
				1,
				false
			],
			"inputs":[
				{
					"widget":{
						"name":"blocks_to_swap"
					},
					"name":"blocks_to_swap",
					"label":"blocks_to_swap",
					"type":"INT",
					"localized_name":"blocks_to_swap"
				},
				{
					"widget":{
						"name":"offload_img_emb"
					},
					"name":"offload_img_emb",
					"label":"offload_img_emb",
					"type":"BOOLEAN",
					"localized_name":"offload_img_emb"
				},
				{
					"widget":{
						"name":"offload_txt_emb"
					},
					"name":"offload_txt_emb",
					"label":"offload_txt_emb",
					"type":"BOOLEAN",
					"localized_name":"offload_txt_emb"
				},
				{
					"widget":{
						"name":"use_non_blocking"
					},
					"shape":7,
					"name":"use_non_blocking",
					"label":"use_non_blocking",
					"type":"BOOLEAN",
					"localized_name":"use_non_blocking"
				},
				{
					"widget":{
						"name":"vace_blocks_to_swap"
					},
					"shape":7,
					"name":"vace_blocks_to_swap",
					"label":"vace_blocks_to_swap",
					"type":"INT",
					"localized_name":"vace_blocks_to_swap"
				},
				{
					"widget":{
						"name":"prefetch_blocks"
					},
					"shape":7,
					"name":"prefetch_blocks",
					"label":"prefetch_blocks",
					"type":"INT",
					"localized_name":"prefetch_blocks"
				},
				{
					"widget":{
						"name":"block_swap_debug"
					},
					"shape":7,
					"name":"block_swap_debug",
					"label":"block_swap_debug",
					"type":"BOOLEAN",
					"localized_name":"block_swap_debug"
				}
			],
			"flags":{
				
			},
			"type":"WanVideoBlockSwap",
			"mode":0,
			"bgcolor":"#335",
			"size":[
				281.404296875,
				202
			],
			"pos":[
				-9.532848358154297,
				410.06719970703125
			],
			"id":29,
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"37365817e82c3d6057fcb0a5d7f952f7376f096a",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"WanVideoBlockSwap"
			},
			"order":3
		},
		{
			"outputs":[
				{
					"name":"model",
					"links":[
						119
					],
					"label":"model",
					"type":"WANVIDEOMODEL",
					"localized_name":"model"
				}
			],
			"color":"#223",
			"widgets_values":[
				
			],
			"inputs":[
				{
					"name":"model",
					"link":117,
					"label":"model",
					"type":"WANVIDEOMODEL",
					"localized_name":"model"
				},
				{
					"shape":7,
					"name":"lora",
					"link":139,
					"label":"lora",
					"type":"WANVIDLORA",
					"localized_name":"lora"
				}
			],
			"flags":{
				
			},
			"type":"WanVideoSetLoRAs",
			"mode":0,
			"bgcolor":"#335",
			"size":[
				266.025634765625,
				46
			],
			"pos":[
				312.96234130859375,
				409.207275390625
			],
			"id":60,
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"174cba575912a534e8c106c0c318c48f3df0e053",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"WanVideoSetLoRAs"
			},
			"order":36
		},
		{
			"outputs":[
				{
					"name":"lora",
					"links":[
						139
					],
					"label":"lora",
					"type":"WANVIDLORA",
					"localized_name":"lora"
				}
			],
			"color":"#223",
			"widgets_values":[
				"lightx2v_T2V_14B_cfg_step_distill_v2_lora_rank128_bf16.safetensors",
				1,
				"Wan2.1-Fun-14B-InP-MPS.safetensors",
				0.5,
				"none",
				1,
				"none",
				1,
				"none",
				1,
				false,
				false
			],
			"inputs":[
				{
					"shape":7,
					"name":"prev_lora",
					"label":"prev_lora",
					"type":"WANVIDLORA",
					"localized_name":"prev_lora"
				},
				{
					"shape":7,
					"name":"blocks",
					"label":"blocks",
					"type":"SELECTEDBLOCKS",
					"localized_name":"blocks"
				},
				{
					"widget":{
						"name":"lora_0"
					},
					"name":"lora_0",
					"label":"lora_0",
					"type":"COMBO",
					"localized_name":"lora_0"
				},
				{
					"widget":{
						"name":"strength_0"
					},
					"name":"strength_0",
					"label":"strength_0",
					"type":"FLOAT",
					"localized_name":"strength_0"
				},
				{
					"widget":{
						"name":"lora_1"
					},
					"name":"lora_1",
					"label":"lora_1",
					"type":"COMBO",
					"localized_name":"lora_1"
				},
				{
					"widget":{
						"name":"strength_1"
					},
					"name":"strength_1",
					"label":"strength_1",
					"type":"FLOAT",
					"localized_name":"strength_1"
				},
				{
					"widget":{
						"name":"lora_2"
					},
					"name":"lora_2",
					"label":"lora_2",
					"type":"COMBO",
					"localized_name":"lora_2"
				},
				{
					"widget":{
						"name":"strength_2"
					},
					"name":"strength_2",
					"label":"strength_2",
					"type":"FLOAT",
					"localized_name":"strength_2"
				},
				{
					"widget":{
						"name":"lora_3"
					},
					"name":"lora_3",
					"label":"lora_3",
					"type":"COMBO",
					"localized_name":"lora_3"
				},
				{
					"widget":{
						"name":"strength_3"
					},
					"name":"strength_3",
					"label":"strength_3",
					"type":"FLOAT",
					"localized_name":"strength_3"
				},
				{
					"widget":{
						"name":"lora_4"
					},
					"name":"lora_4",
					"label":"lora_4",
					"type":"COMBO",
					"localized_name":"lora_4"
				},
				{
					"widget":{
						"name":"strength_4"
					},
					"name":"strength_4",
					"label":"strength_4",
					"type":"FLOAT",
					"localized_name":"strength_4"
				},
				{
					"widget":{
						"name":"low_mem_load"
					},
					"shape":7,
					"name":"low_mem_load",
					"label":"low_mem_load",
					"type":"BOOLEAN",
					"localized_name":"low_mem_load"
				},
				{
					"widget":{
						"name":"merge_loras"
					},
					"shape":7,
					"name":"merge_loras",
					"label":"merge_loras",
					"type":"BOOLEAN",
					"localized_name":"merge_loras"
				}
			],
			"flags":{
				
			},
			"type":"WanVideoLoraSelectMulti",
			"mode":0,
			"bgcolor":"#335",
			"size":[
				429.9698181152344,
				342
			],
			"pos":[
				-479.69586181640625,
				257.8154296875
			],
			"id":74,
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"174cba575912a534e8c106c0c318c48f3df0e053",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"WanVideoLoraSelectMulti"
			},
			"order":4
		},
		{
			"outputs":[
				{
					"name":"extra_model",
					"links":[
						134
					],
					"label":"extra_model",
					"type":"VACEPATH",
					"localized_name":"extra_model"
				}
			],
			"color":"#223",
			"widgets_values":[
				"Lynx/Wan2_1-T2V-14B-Lynx_lite_ip_layers_fp16.safetensors"
			],
			"inputs":[
				{
					"shape":7,
					"name":"prev_model",
					"label":"prev_model",
					"type":"VACEPATH",
					"localized_name":"prev_model"
				},
				{
					"widget":{
						"name":"extra_model"
					},
					"name":"extra_model",
					"label":"extra_model",
					"type":"COMBO",
					"localized_name":"extra_model"
				}
			],
			"flags":{
				
			},
			"type":"WanVideoExtraModelSelect",
			"mode":0,
			"bgcolor":"#335",
			"size":[
				437.4229736328125,
				58
			],
			"pos":[
				-485.28558349609375,
				22.36006736755371
			],
			"id":69,
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"37365817e82c3d6057fcb0a5d7f952f7376f096a",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"WanVideoExtraModelSelect"
			},
			"order":5
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"*",
					"label":"*",
					"type":"*"
				}
			],
			"size":[
				210,
				60
			],
			"pos":[
				311.9355163574219,
				607.6762084960938
			],
			"widgets_values":[
				"model"
			],
			"inputs":[
				{
					"name":"WANVIDEOMODEL",
					"link":141,
					"label":"WANVIDEOMODEL",
					"type":"WANVIDEOMODEL"
				}
			],
			"flags":{
				"collapsed":false
			},
			"id":78,
			"type":"SetNode",
			"title":"Set_model",
			"properties":{
				"previousName":"model",
				"widget_ue_connectable":{
					
				}
			},
			"order":42
		},
		{
			"outputs":[
				{
					"name":"vae",
					"links":[
						142
					],
					"label":"vae",
					"type":"WANVAE",
					"localized_name":"vae"
				}
			],
			"color":"#322",
			"widgets_values":[
				"Wan2_1_VAE_bf16.safetensors",
				"bf16"
			],
			"inputs":[
				{
					"shape":7,
					"name":"compile_args",
					"label":"compile_args",
					"type":"WANCOMPILEARGS",
					"localized_name":"compile_args"
				},
				{
					"widget":{
						"name":"model_name"
					},
					"name":"model_name",
					"label":"model_name",
					"type":"COMBO",
					"localized_name":"model_name"
				},
				{
					"widget":{
						"name":"precision"
					},
					"shape":7,
					"name":"precision",
					"label":"precision",
					"type":"COMBO",
					"localized_name":"precision"
				}
			],
			"flags":{
				
			},
			"type":"WanVideoVAELoader",
			"mode":0,
			"bgcolor":"#533",
			"size":[
				404.4119873046875,
				91.34965515136719
			],
			"pos":[
				-463.2235107421875,
				653.7418823242188
			],
			"id":31,
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"37365817e82c3d6057fcb0a5d7f952f7376f096a",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"WanVideoVAELoader"
			},
			"order":6
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"resampler",
					"links":[
						143
					],
					"label":"resampler",
					"type":"LYNXRESAMPLER",
					"localized_name":"resampler"
				}
			],
			"size":[
				412.9474182128906,
				82
			],
			"pos":[
				-462.26373291015625,
				800.6630249023438
			],
			"widgets_values":[
				"Lynx/lynx_lite_resampler_fp32.safetensors",
				"fp16"
			],
			"inputs":[
				{
					"widget":{
						"name":"model_name"
					},
					"name":"model_name",
					"label":"model_name",
					"type":"COMBO",
					"localized_name":"model_name"
				},
				{
					"widget":{
						"name":"precision"
					},
					"name":"precision",
					"label":"precision",
					"type":"COMBO",
					"localized_name":"precision"
				}
			],
			"flags":{
				
			},
			"id":16,
			"type":"LoadLynxResampler",
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"37365817e82c3d6057fcb0a5d7f952f7376f096a",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"LoadLynxResampler"
			},
			"order":7
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"*",
					"type":"*"
				}
			],
			"size":[
				210,
				58
			],
			"pos":[
				316.3933410644531,
				843.8943481445312
			],
			"widgets_values":[
				"lynxResampler"
			],
			"inputs":[
				{
					"name":"LYNXRESAMPLER",
					"link":143,
					"type":"LYNXRESAMPLER"
				}
			],
			"flags":{
				
			},
			"id":80,
			"type":"SetNode",
			"title":"Set_lynxResampler",
			"properties":{
				"previousName":"lynxResampler"
			},
			"order":25
		},
		{
			"outputs":[
				{
					"name":"IMAGE",
					"links":[
						121
					],
					"label":"IMAGE",
					"type":"IMAGE"
				}
			],
			"color":"#2a363b",
			"widgets_values":[
				"input_image"
			],
			"inputs":[
				{
					"name":"IMAGE",
					"link":120,
					"label":"IMAGE",
					"type":"IMAGE"
				}
			],
			"flags":{
				"collapsed":true
			},
			"type":"SetNode",
			"title":"Set_input_image",
			"mode":0,
			"bgcolor":"#3f5159",
			"size":[
				210,
				60
			],
			"pos":[
				-107.48358154296875,
				1024.691162109375
			],
			"id":61,
			"properties":{
				"previousName":"input_image",
				"widget_ue_connectable":{
					
				}
			},
			"order":22
		},
		{
			"mode":0,
			"outputs":[
				
			],
			"size":[
				210,
				258
			],
			"pos":[
				-138.0159149169922,
				1185.5421142578125
			],
			"widgets_values":[
				
			],
			"inputs":[
				{
					"name":"images",
					"link":113,
					"label":"images",
					"type":"IMAGE",
					"localized_name":"images"
				}
			],
			"flags":{
				
			},
			"id":21,
			"type":"PreviewImage",
			"properties":{
				"cnr_id":"comfy-core",
				"ver":"0.3.59",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"PreviewImage"
			},
			"order":32
		},
		{
			"mode":0,
			"outputs":[
				
			],
			"size":[
				325.4395446777344,
				470.0979919433594
			],
			"pos":[
				92.69512939453125,
				1065.900634765625
			],
			"widgets_values":[
				
			],
			"inputs":[
				{
					"name":"images",
					"link":114,
					"label":"images",
					"type":"IMAGE",
					"localized_name":"images"
				}
			],
			"flags":{
				
			},
			"id":36,
			"type":"PreviewImage",
			"properties":{
				"cnr_id":"comfy-core",
				"ver":"0.3.59",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"PreviewImage"
			},
			"order":34
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"ip_image",
					"links":[
						113,
						145
					],
					"label":"ip_image",
					"type":"IMAGE",
					"localized_name":"ip_image"
				},
				{
					"name":"ref_image",
					"links":[
						114,
						146
					],
					"label":"ref_image",
					"type":"IMAGE",
					"localized_name":"ref_image"
				}
			],
			"size":[
				180.0749969482422,
				46
			],
			"pos":[
				-115.72020721435547,
				1083.48095703125
			],
			"widgets_values":[
				
			],
			"inputs":[
				{
					"name":"image",
					"link":121,
					"label":"image",
					"type":"IMAGE",
					"localized_name":"image"
				}
			],
			"flags":{
				
			},
			"id":53,
			"type":"LynxInsightFaceCrop",
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"174cba575912a534e8c106c0c318c48f3df0e053",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"LynxInsightFaceCrop"
			},
			"order":28
		},
		{
			"outputs":[
				{
					"name":"IMAGE",
					"links":[
						148
					],
					"type":"IMAGE"
				}
			],
			"color":"#2a363b",
			"widgets_values":[
				"refimg"
			],
			"inputs":[
				
			],
			"flags":{
				
			},
			"type":"GetNode",
			"title":"Get_refimg",
			"mode":0,
			"bgcolor":"#3f5159",
			"size":[
				210,
				58
			],
			"pos":[
				1008.4987182617188,
				1310.37548828125
			],
			"id":85,
			"properties":{
				
			},
			"order":8
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"LYNXRESAMPLER",
					"links":[
						144
					],
					"type":"LYNXRESAMPLER"
				}
			],
			"size":[
				210,
				60
			],
			"pos":[
				771.9669799804688,
				1210.5140380859375
			],
			"widgets_values":[
				"lynxResampler"
			],
			"inputs":[
				
			],
			"flags":{
				
			},
			"id":81,
			"type":"GetNode",
			"title":"Get_lynxResampler",
			"properties":{
				
			},
			"order":9
		},
		{
			"outputs":[
				{
					"name":"IMAGE",
					"links":[
						147
					],
					"type":"IMAGE"
				}
			],
			"color":"#2a363b",
			"widgets_values":[
				"ipimg"
			],
			"inputs":[
				
			],
			"flags":{
				
			},
			"type":"GetNode",
			"title":"Get_ipimg",
			"mode":0,
			"bgcolor":"#3f5159",
			"size":[
				210,
				58
			],
			"pos":[
				771.9078979492188,
				1313.132568359375
			],
			"id":84,
			"properties":{
				
			},
			"order":10
		},
		{
			"outputs":[
				{
					"name":"text_embeds",
					"links":[
						136
					],
					"label":"text_embeds",
					"type":"WANVIDEOTEXTEMBEDS",
					"localized_name":"text_embeds"
				},
				{
					"name":"negative_text_embeds",
					"label":"negative_text_embeds",
					"type":"WANVIDEOTEXTEMBEDS",
					"localized_name":"negative_text_embeds"
				},
				{
					"name":"positive_prompt",
					"label":"positive_prompt",
					"type":"STRING",
					"localized_name":"positive_prompt"
				}
			],
			"color":"#432",
			"widgets_values":[
				"umt5-xxl-enc-bf16.safetensors",
				"bf16",
				"image of a face",
				"",
				"disabled",
				true,
				"gpu"
			],
			"inputs":[
				{
					"shape":7,
					"name":"extender_args",
					"label":"extender_args",
					"type":"WANVIDEOPROMPTEXTENDER_ARGS",
					"localized_name":"extender_args"
				},
				{
					"widget":{
						"name":"model_name"
					},
					"name":"model_name",
					"label":"model_name",
					"type":"COMBO",
					"localized_name":"model_name"
				},
				{
					"widget":{
						"name":"precision"
					},
					"name":"precision",
					"label":"precision",
					"type":"COMBO",
					"localized_name":"precision"
				},
				{
					"widget":{
						"name":"positive_prompt"
					},
					"name":"positive_prompt",
					"label":"positive_prompt",
					"type":"STRING",
					"localized_name":"positive_prompt"
				},
				{
					"widget":{
						"name":"negative_prompt"
					},
					"name":"negative_prompt",
					"label":"negative_prompt",
					"type":"STRING",
					"localized_name":"negative_prompt"
				},
				{
					"widget":{
						"name":"quantization"
					},
					"name":"quantization",
					"label":"quantization",
					"type":"COMBO",
					"localized_name":"quantization"
				},
				{
					"widget":{
						"name":"use_disk_cache"
					},
					"name":"use_disk_cache",
					"label":"use_disk_cache",
					"type":"BOOLEAN",
					"localized_name":"use_disk_cache"
				},
				{
					"widget":{
						"name":"device"
					},
					"name":"device",
					"label":"device",
					"type":"COMBO",
					"localized_name":"device"
				}
			],
			"flags":{
				
			},
			"type":"WanVideoTextEncodeCached",
			"mode":0,
			"bgcolor":"#653",
			"size":[
				532.5263061523438,
				354.6100769042969
			],
			"pos":[
				753.5730590820312,
				1421.1654052734375
			],
			"id":51,
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"37365817e82c3d6057fcb0a5d7f952f7376f096a",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"WanVideoTextEncodeCached"
			},
			"order":11
		},
		{
			"outputs":[
				
			],
			"color":"#432",
			"widgets_values":[
				"In the original code, the prompt for the reference extraction pass was hardcoded as this."
			],
			"inputs":[
				
			],
			"flags":{
				
			},
			"type":"Note",
			"mode":0,
			"bgcolor":"#653",
			"size":[
				296.849365234375,
				98.86161041259766
			],
			"pos":[
				1306.4437255859375,
				1641.5010986328125
			],
			"id":65,
			"properties":{
				"widget_ue_connectable":{
					
				}
			},
			"order":12
		},
		{
			"outputs":[
				
			],
			"color":"#432",
			"widgets_values":[
				"lite lynx model only includes ip adapter for face id.\n\nfull lynx model also includes reference adapter, which works by first running your reference image through the model for 1 step, and the main inference then uses those extracted values on each step.\n\nThe reference adapter feels extremely strong and usually reducing it's strength or limiting the blocks it is applied to helps avoid that"
			],
			"inputs":[
				
			],
			"flags":{
				
			},
			"type":"Note",
			"mode":0,
			"bgcolor":"#653",
			"size":[
				301.77508544921875,
				143.64019775390625
			],
			"pos":[
				1303.2755126953125,
				1456.7308349609375
			],
			"id":66,
			"properties":{
				"widget_ue_connectable":{
					
				}
			},
			"order":13
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"image_embeds",
					"links":[
						149
					],
					"label":"image_embeds",
					"type":"WANVIDIMAGE_EMBEDS",
					"localized_name":"image_embeds"
				}
			],
			"size":[
				281.57501220703125,
				254
			],
			"pos":[
				1294.988525390625,
				1028.5494384765625
			],
			"widgets_values":[
				0.7,
				0.6,
				2,
				0,
				1
			],
			"inputs":[
				{
					"name":"embeds",
					"link":101,
					"label":"embeds",
					"type":"WANVIDIMAGE_EMBEDS",
					"localized_name":"embeds"
				},
				{
					"shape":7,
					"name":"vae",
					"link":153,
					"label":"vae",
					"type":"WANVAE",
					"localized_name":"vae"
				},
				{
					"shape":7,
					"name":"lynx_ip_embeds",
					"link":126,
					"label":"lynx_ip_embeds",
					"type":"LYNXIP",
					"localized_name":"lynx_ip_embeds"
				},
				{
					"shape":7,
					"name":"ref_image",
					"link":148,
					"label":"ref_image",
					"type":"IMAGE",
					"localized_name":"ref_image"
				},
				{
					"shape":7,
					"name":"ref_text_embed",
					"link":136,
					"label":"ref_text_embed",
					"type":"WANVIDEOTEXTEMBEDS",
					"localized_name":"ref_text_embed"
				},
				{
					"shape":7,
					"name":"ref_blocks_to_use",
					"label":"ref_blocks_to_use",
					"type":"STRING",
					"localized_name":"ref_blocks_to_use"
				},
				{
					"widget":{
						"name":"ip_scale"
					},
					"name":"ip_scale",
					"label":"ip_scale",
					"type":"FLOAT",
					"localized_name":"ip_scale"
				},
				{
					"widget":{
						"name":"ref_scale"
					},
					"name":"ref_scale",
					"label":"ref_scale",
					"type":"FLOAT",
					"localized_name":"ref_scale"
				},
				{
					"widget":{
						"name":"lynx_cfg_scale"
					},
					"name":"lynx_cfg_scale",
					"label":"lynx_cfg_scale",
					"type":"FLOAT",
					"localized_name":"lynx_cfg_scale"
				},
				{
					"widget":{
						"name":"start_percent"
					},
					"name":"start_percent",
					"label":"start_percent",
					"type":"FLOAT",
					"localized_name":"start_percent"
				},
				{
					"widget":{
						"name":"end_percent"
					},
					"name":"end_percent",
					"label":"end_percent",
					"type":"FLOAT",
					"localized_name":"end_percent"
				}
			],
			"flags":{
				
			},
			"id":55,
			"type":"WanVideoAddLynxEmbeds",
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"174cba575912a534e8c106c0c318c48f3df0e053",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"WanVideoAddLynxEmbeds"
			},
			"order":30
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"*",
					"type":"*"
				}
			],
			"size":[
				272.91998291015625,
				58.896114349365234
			],
			"pos":[
				1303.992919921875,
				1328.437255859375
			],
			"widgets_values":[
				"image_embeds"
			],
			"inputs":[
				{
					"name":"WANVIDIMAGE_EMBEDS",
					"link":149,
					"type":"WANVIDIMAGE_EMBEDS"
				}
			],
			"flags":{
				
			},
			"id":86,
			"type":"SetNode",
			"title":"Set_image_embeds",
			"properties":{
				"previousName":"image_embeds"
			},
			"order":37
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"WANVIDEOMODEL",
					"links":[
						151
					],
					"type":"WANVIDEOMODEL"
				}
			],
			"size":[
				210,
				60
			],
			"pos":[
				659.9064331054688,
				44.43739318847656
			],
			"widgets_values":[
				"model"
			],
			"inputs":[
				
			],
			"flags":{
				
			},
			"id":88,
			"type":"GetNode",
			"title":"Get_model",
			"properties":{
				
			},
			"order":14
		},
		{
			"outputs":[
				{
					"name":"text_embeds",
					"links":[
						31
					],
					"label":"text_embeds",
					"type":"WANVIDEOTEXTEMBEDS",
					"localized_name":"text_embeds"
				},
				{
					"name":"negative_text_embeds",
					"label":"negative_text_embeds",
					"type":"WANVIDEOTEXTEMBEDS",
					"localized_name":"negative_text_embeds"
				},
				{
					"name":"positive_prompt",
					"label":"positive_prompt",
					"type":"STRING",
					"localized_name":"positive_prompt"
				}
			],
			"color":"#432",
			"widgets_values":[
				"umt5-xxl-enc-bf16.safetensors",
				"bf16",
				"a beautiful woman is singing with her guitar",
				"色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走",
				"disabled",
				true,
				"gpu"
			],
			"inputs":[
				{
					"shape":7,
					"name":"extender_args",
					"label":"extender_args",
					"type":"WANVIDEOPROMPTEXTENDER_ARGS",
					"localized_name":"extender_args"
				},
				{
					"widget":{
						"name":"model_name"
					},
					"name":"model_name",
					"label":"model_name",
					"type":"COMBO",
					"localized_name":"model_name"
				},
				{
					"widget":{
						"name":"precision"
					},
					"name":"precision",
					"label":"precision",
					"type":"COMBO",
					"localized_name":"precision"
				},
				{
					"widget":{
						"name":"positive_prompt"
					},
					"name":"positive_prompt",
					"label":"positive_prompt",
					"type":"STRING",
					"localized_name":"positive_prompt"
				},
				{
					"widget":{
						"name":"negative_prompt"
					},
					"name":"negative_prompt",
					"label":"negative_prompt",
					"type":"STRING",
					"localized_name":"negative_prompt"
				},
				{
					"widget":{
						"name":"quantization"
					},
					"name":"quantization",
					"label":"quantization",
					"type":"COMBO",
					"localized_name":"quantization"
				},
				{
					"widget":{
						"name":"use_disk_cache"
					},
					"name":"use_disk_cache",
					"label":"use_disk_cache",
					"type":"BOOLEAN",
					"localized_name":"use_disk_cache"
				},
				{
					"widget":{
						"name":"device"
					},
					"name":"device",
					"label":"device",
					"type":"COMBO",
					"localized_name":"device"
				}
			],
			"flags":{
				
			},
			"type":"WanVideoTextEncodeCached",
			"mode":0,
			"bgcolor":"#653",
			"size":[
				470.86871337890625,
				332.741455078125
			],
			"pos":[
				650.40771484375,
				165.3634796142578
			],
			"id":26,
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"37365817e82c3d6057fcb0a5d7f952f7376f096a",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"WanVideoTextEncodeCached"
			},
			"order":15
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"*",
					"type":"*"
				}
			],
			"size":[
				210,
				60
			],
			"pos":[
				314.1301574707031,
				728.5081176757812
			],
			"widgets_values":[
				"vae"
			],
			"inputs":[
				{
					"name":"WANVAE",
					"link":142,
					"type":"WANVAE"
				}
			],
			"flags":{
				
			},
			"id":79,
			"type":"SetNode",
			"title":"Set_vae",
			"properties":{
				"previousName":"vae"
			},
			"order":24
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"WANVAE",
					"links":[
						152
					],
					"type":"WANVAE"
				}
			],
			"size":[
				210,
				58
			],
			"pos":[
				661.8959350585938,
				550.1888427734375
			],
			"widgets_values":[
				"vae"
			],
			"inputs":[
				
			],
			"flags":{
				
			},
			"id":89,
			"type":"GetNode",
			"title":"Get_vae",
			"properties":{
				
			},
			"order":16
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"images",
					"links":[
						109,
						140
					],
					"label":"images",
					"type":"IMAGE",
					"localized_name":"images"
				}
			],
			"size":[
				270,
				198
			],
			"pos":[
				1481.7821044921875,
				28.896997451782227
			],
			"widgets_values":[
				false,
				272,
				272,
				144,
				128,
				"default"
			],
			"inputs":[
				{
					"name":"vae",
					"link":152,
					"label":"vae",
					"type":"WANVAE",
					"localized_name":"vae"
				},
				{
					"name":"samples",
					"link":40,
					"label":"samples",
					"type":"LATENT",
					"localized_name":"samples"
				},
				{
					"widget":{
						"name":"enable_vae_tiling"
					},
					"name":"enable_vae_tiling",
					"label":"enable_vae_tiling",
					"type":"BOOLEAN",
					"localized_name":"enable_vae_tiling"
				},
				{
					"widget":{
						"name":"tile_x"
					},
					"name":"tile_x",
					"label":"tile_x",
					"type":"INT",
					"localized_name":"tile_x"
				},
				{
					"widget":{
						"name":"tile_y"
					},
					"name":"tile_y",
					"label":"tile_y",
					"type":"INT",
					"localized_name":"tile_y"
				},
				{
					"widget":{
						"name":"tile_stride_x"
					},
					"name":"tile_stride_x",
					"label":"tile_stride_x",
					"type":"INT",
					"localized_name":"tile_stride_x"
				},
				{
					"widget":{
						"name":"tile_stride_y"
					},
					"name":"tile_stride_y",
					"label":"tile_stride_y",
					"type":"INT",
					"localized_name":"tile_stride_y"
				},
				{
					"widget":{
						"name":"normalization"
					},
					"shape":7,
					"name":"normalization",
					"label":"normalization",
					"type":"COMBO",
					"localized_name":"normalization"
				}
			],
			"flags":{
				
			},
			"id":32,
			"type":"WanVideoDecode",
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"37365817e82c3d6057fcb0a5d7f952f7376f096a",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"WanVideoDecode"
			},
			"order":31
		},
		{
			"outputs":[
				{
					"name":"IMAGE",
					"links":[
						122
					],
					"label":"IMAGE",
					"type":"IMAGE"
				}
			],
			"color":"#2a363b",
			"widgets_values":[
				"input_image"
			],
			"inputs":[
				
			],
			"flags":{
				"collapsed":true
			},
			"type":"GetNode",
			"title":"Get_input_image",
			"mode":0,
			"bgcolor":"#3f5159",
			"size":[
				210,
				60
			],
			"pos":[
				1501.257568359375,
				523.7547607421875
			],
			"id":62,
			"properties":{
				"widget_ue_connectable":{
					
				}
			},
			"order":17
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"images",
					"links":[
						112
					],
					"label":"images",
					"type":"IMAGE",
					"localized_name":"images"
				}
			],
			"size":[
				270,
				150
			],
			"pos":[
				1480.4945068359375,
				292.5618896484375
			],
			"widgets_values":[
				2,
				"left",
				true,
				null
			],
			"inputs":[
				{
					"name":"image_1",
					"link":109,
					"label":"image_1",
					"type":"IMAGE",
					"localized_name":"image_1"
				},
				{
					"shape":7,
					"name":"image_2",
					"link":122,
					"label":"image_2",
					"type":"IMAGE",
					"localized_name":"image_2"
				},
				{
					"widget":{
						"name":"inputcount"
					},
					"name":"inputcount",
					"label":"inputcount",
					"type":"INT",
					"localized_name":"inputcount"
				},
				{
					"widget":{
						"name":"direction"
					},
					"name":"direction",
					"label":"direction",
					"type":"COMBO",
					"localized_name":"direction"
				},
				{
					"widget":{
						"name":"match_image_size"
					},
					"name":"match_image_size",
					"label":"match_image_size",
					"type":"BOOLEAN",
					"localized_name":"match_image_size"
				}
			],
			"flags":{
				
			},
			"id":57,
			"type":"ImageConcatMulti",
			"properties":{
				"cnr_id":"comfyui-kjnodes",
				"ver":"b1fffd33ba8b14cb4900e2c557f4a2ba0b340ff5",
				"widget_ue_connectable":{
					
				}
			},
			"order":38
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"WANVAE",
					"links":[
						153
					],
					"type":"WANVAE"
				}
			],
			"size":[
				210,
				60
			],
			"pos":[
				1057.5208740234375,
				1145.174560546875
			],
			"widgets_values":[
				"vae"
			],
			"inputs":[
				
			],
			"flags":{
				"collapsed":true
			},
			"id":90,
			"type":"GetNode",
			"title":"Get_vae",
			"properties":{
				
			},
			"order":18
		},
		{
			"outputs":[
				
			],
			"color":"#432",
			"widgets_values":[
				"Original code and this node uses insightface only to crop the image, you can use other crop automatic face croppers or manually crop the face for the ip_image as well. The image is tiny 112x112\n\nWhile InsightFace code is MIT licensed, the Buffalo -model used has strictly \"non-commercial research purposes only\" -license\n\nFor the actual encoding Arcface model is used, I couldn't find clear answer to what it's license is.\n\nFor the reference the original code uses different slightly more zoomed out cropping  for 256x256 input image, you can do this manually as well."
			],
			"inputs":[
				
			],
			"flags":{
				
			},
			"type":"Note",
			"title":"Note: Insightface",
			"mode":0,
			"bgcolor":"#653",
			"size":[
				320.8675842285156,
				233.28762817382812
			],
			"pos":[
				-893.1392211914062,
				1049.218505859375
			],
			"id":64,
			"properties":{
				"widget_ue_connectable":{
					
				}
			},
			"order":19
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"samples",
					"links":[
						40
					],
					"label":"samples",
					"type":"LATENT",
					"localized_name":"samples"
				},
				{
					"name":"denoised_samples",
					"label":"denoised_samples",
					"type":"LATENT",
					"localized_name":"denoised_samples"
				}
			],
			"size":[
				318.9197082519531,
				737.5819091796875
			],
			"pos":[
				1134.796875,
				46.746986389160156
			],
			"widgets_values":[
				6,
				1,
				8,
				709936464770356,
				"randomize",
				true,
				"lcm",
				0,
				1,
				false,
				"comfy",
				0,
				-1,
				false
			],
			"inputs":[
				{
					"name":"model",
					"link":151,
					"label":"model",
					"type":"WANVIDEOMODEL",
					"localized_name":"model"
				},
				{
					"name":"image_embeds",
					"link":150,
					"label":"image_embeds",
					"type":"WANVIDIMAGE_EMBEDS",
					"localized_name":"image_embeds"
				},
				{
					"shape":7,
					"name":"text_embeds",
					"link":31,
					"label":"text_embeds",
					"type":"WANVIDEOTEXTEMBEDS",
					"localized_name":"text_embeds"
				},
				{
					"shape":7,
					"name":"samples",
					"label":"samples",
					"type":"LATENT",
					"localized_name":"samples"
				},
				{
					"shape":7,
					"name":"feta_args",
					"label":"feta_args",
					"type":"FETAARGS",
					"localized_name":"feta_args"
				},
				{
					"shape":7,
					"name":"context_options",
					"label":"context_options",
					"type":"WANVIDCONTEXT",
					"localized_name":"context_options"
				},
				{
					"shape":7,
					"name":"cache_args",
					"label":"cache_args",
					"type":"CACHEARGS",
					"localized_name":"cache_args"
				},
				{
					"shape":7,
					"name":"flowedit_args",
					"label":"flowedit_args",
					"type":"FLOWEDITARGS",
					"localized_name":"flowedit_args"
				},
				{
					"shape":7,
					"name":"slg_args",
					"label":"slg_args",
					"type":"SLGARGS",
					"localized_name":"slg_args"
				},
				{
					"shape":7,
					"name":"loop_args",
					"label":"loop_args",
					"type":"LOOPARGS",
					"localized_name":"loop_args"
				},
				{
					"shape":7,
					"name":"experimental_args",
					"label":"experimental_args",
					"type":"EXPERIMENTALARGS",
					"localized_name":"experimental_args"
				},
				{
					"shape":7,
					"name":"sigmas",
					"label":"sigmas",
					"type":"SIGMAS",
					"localized_name":"sigmas"
				},
				{
					"shape":7,
					"name":"unianimate_poses",
					"label":"unianimate_poses",
					"type":"UNIANIMATE_POSE",
					"localized_name":"unianimate_poses"
				},
				{
					"shape":7,
					"name":"fantasytalking_embeds",
					"label":"fantasytalking_embeds",
					"type":"FANTASYTALKING_EMBEDS",
					"localized_name":"fantasytalking_embeds"
				},
				{
					"shape":7,
					"name":"uni3c_embeds",
					"label":"uni3c_embeds",
					"type":"UNI3C_EMBEDS",
					"localized_name":"uni3c_embeds"
				},
				{
					"shape":7,
					"name":"multitalk_embeds",
					"label":"multitalk_embeds",
					"type":"MULTITALK_EMBEDS",
					"localized_name":"multitalk_embeds"
				},
				{
					"shape":7,
					"name":"freeinit_args",
					"label":"freeinit_args",
					"type":"FREEINITARGS",
					"localized_name":"freeinit_args"
				},
				{
					"widget":{
						"name":"steps"
					},
					"name":"steps",
					"label":"steps",
					"type":"INT",
					"localized_name":"steps"
				},
				{
					"widget":{
						"name":"cfg"
					},
					"name":"cfg",
					"label":"cfg",
					"type":"FLOAT",
					"localized_name":"cfg"
				},
				{
					"widget":{
						"name":"shift"
					},
					"name":"shift",
					"label":"shift",
					"type":"FLOAT",
					"localized_name":"shift"
				},
				{
					"widget":{
						"name":"seed"
					},
					"name":"seed",
					"label":"seed",
					"type":"INT",
					"localized_name":"seed"
				},
				{
					"widget":{
						"name":"force_offload"
					},
					"name":"force_offload",
					"label":"force_offload",
					"type":"BOOLEAN",
					"localized_name":"force_offload"
				},
				{
					"widget":{
						"name":"scheduler"
					},
					"name":"scheduler",
					"label":"scheduler",
					"type":"COMBO",
					"localized_name":"scheduler"
				},
				{
					"widget":{
						"name":"riflex_freq_index"
					},
					"name":"riflex_freq_index",
					"label":"riflex_freq_index",
					"type":"INT",
					"localized_name":"riflex_freq_index"
				},
				{
					"widget":{
						"name":"denoise_strength"
					},
					"shape":7,
					"name":"denoise_strength",
					"label":"denoise_strength",
					"type":"FLOAT",
					"localized_name":"denoise_strength"
				},
				{
					"widget":{
						"name":"batched_cfg"
					},
					"shape":7,
					"name":"batched_cfg",
					"label":"batched_cfg",
					"type":"BOOLEAN",
					"localized_name":"batched_cfg"
				},
				{
					"widget":{
						"name":"rope_function"
					},
					"shape":7,
					"name":"rope_function",
					"label":"rope_function",
					"type":"COMBO",
					"localized_name":"rope_function"
				},
				{
					"widget":{
						"name":"start_step"
					},
					"shape":7,
					"name":"start_step",
					"label":"start_step",
					"type":"INT",
					"localized_name":"start_step"
				},
				{
					"widget":{
						"name":"end_step"
					},
					"shape":7,
					"name":"end_step",
					"label":"end_step",
					"type":"INT",
					"localized_name":"end_step"
				},
				{
					"widget":{
						"name":"add_noise_to_samples"
					},
					"shape":7,
					"name":"add_noise_to_samples",
					"label":"add_noise_to_samples",
					"type":"BOOLEAN",
					"localized_name":"add_noise_to_samples"
				}
			],
			"flags":{
				
			},
			"id":22,
			"type":"WanVideoSampler",
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"37365817e82c3d6057fcb0a5d7f952f7376f096a",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"WanVideoSampler"
			},
			"order":27
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"Filenames",
					"label":"Filenames",
					"type":"VHS_FILENAMES",
					"localized_name":"Filenames"
				}
			],
			"size":[
				1784.03125,
				1389.7103271484375
			],
			"pos":[
				1889.5836181640625,
				-63.28015899658203
			],
			"widgets_values":{
				"save_output":true,
				"filename_prefix":"Wanlynx",
				"loop_count":0,
				"pix_fmt":"yuv420p",
				"save_metadata":true,
				"crf":19,
				"trim_to_audio":false,
				"videopreview":{
					"paused":false,
					"hidden":false,
					"params":{
						"filename":"Wanlynx_00001_p85_udpeo_1759917234.mp4",
						"workflow":"Wanlynx_00001_p85.png",
						"fullpath":"/data/ComfyUI/personal/445aa9a89d7fa5567450f91c998092da/output/Wanlynx_00001_p85.mp4",
						"format":"video/h264-mp4",
						"subfolder":"",
						"type":"output",
						"frame_rate":24
					}
				},
				"format":"video/h264-mp4",
				"no_preview":false,
				"frame_rate":24,
				"pingpong":false
			},
			"inputs":[
				{
					"name":"images",
					"link":140,
					"label":"images",
					"type":"IMAGE",
					"localized_name":"images"
				},
				{
					"shape":7,
					"name":"audio",
					"label":"audio",
					"type":"AUDIO",
					"localized_name":"audio"
				},
				{
					"shape":7,
					"name":"meta_batch",
					"label":"meta_batch",
					"type":"VHS_BatchManager",
					"localized_name":"meta_batch"
				},
				{
					"shape":7,
					"name":"vae",
					"label":"vae",
					"type":"VAE",
					"localized_name":"vae"
				},
				{
					"widget":{
						"name":"frame_rate"
					},
					"name":"frame_rate",
					"label":"frame_rate",
					"type":"FLOAT",
					"localized_name":"frame_rate"
				},
				{
					"widget":{
						"name":"loop_count"
					},
					"name":"loop_count",
					"label":"loop_count",
					"type":"INT",
					"localized_name":"loop_count"
				},
				{
					"widget":{
						"name":"filename_prefix"
					},
					"name":"filename_prefix",
					"label":"filename_prefix",
					"type":"STRING",
					"localized_name":"filename_prefix"
				},
				{
					"widget":{
						"name":"format"
					},
					"name":"format",
					"label":"format",
					"type":"COMBO",
					"localized_name":"format"
				},
				{
					"widget":{
						"name":"pingpong"
					},
					"name":"pingpong",
					"label":"pingpong",
					"type":"BOOLEAN",
					"localized_name":"pingpong"
				},
				{
					"widget":{
						"name":"save_output"
					},
					"name":"save_output",
					"label":"save_output",
					"type":"BOOLEAN",
					"localized_name":"save_output"
				},
				{
					"widget":{
						"name":"no_preview"
					},
					"shape":7,
					"name":"no_preview",
					"label":"no_preview",
					"type":"BOOLEAN",
					"localized_name":"no_preview"
				}
			],
			"flags":{
				
			},
			"id":77,
			"type":"VHS_VideoCombine",
			"properties":{
				"cnr_id":"comfyui-videohelpersuite",
				"ver":"0edce8ef7ce173ac97a3ed3d6f4636029d1a4530",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"VHS_VideoCombine"
			},
			"order":39
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"Filenames",
					"label":"Filenames",
					"type":"VHS_FILENAMES",
					"localized_name":"Filenames"
				}
			],
			"size":[
				1784.03125,
				1017.3772583007812
			],
			"pos":[
				1887.762939453125,
				1018.841552734375
			],
			"widgets_values":{
				"save_output":false,
				"filename_prefix":"Wanlynx",
				"loop_count":0,
				"pix_fmt":"yuv420p",
				"save_metadata":true,
				"crf":19,
				"trim_to_audio":false,
				"videopreview":{
					"paused":false,
					"hidden":false,
					"params":{
						"filename":"Wanlynx_00001_p85_fntvq_1759917246.mp4",
						"workflow":"Wanlynx_00001_p85.png",
						"fullpath":"/data/ComfyUI/personal/445aa9a89d7fa5567450f91c998092da/temp/Wanlynx_00001_p85.mp4",
						"format":"video/h264-mp4",
						"subfolder":"",
						"type":"temp",
						"frame_rate":24
					}
				},
				"format":"video/h264-mp4",
				"no_preview":false,
				"frame_rate":24,
				"pingpong":false
			},
			"inputs":[
				{
					"name":"images",
					"link":112,
					"label":"images",
					"type":"IMAGE",
					"localized_name":"images"
				},
				{
					"shape":7,
					"name":"audio",
					"label":"audio",
					"type":"AUDIO",
					"localized_name":"audio"
				},
				{
					"shape":7,
					"name":"meta_batch",
					"label":"meta_batch",
					"type":"VHS_BatchManager",
					"localized_name":"meta_batch"
				},
				{
					"shape":7,
					"name":"vae",
					"label":"vae",
					"type":"VAE",
					"localized_name":"vae"
				},
				{
					"widget":{
						"name":"frame_rate"
					},
					"name":"frame_rate",
					"label":"frame_rate",
					"type":"FLOAT",
					"localized_name":"frame_rate"
				},
				{
					"widget":{
						"name":"loop_count"
					},
					"name":"loop_count",
					"label":"loop_count",
					"type":"INT",
					"localized_name":"loop_count"
				},
				{
					"widget":{
						"name":"filename_prefix"
					},
					"name":"filename_prefix",
					"label":"filename_prefix",
					"type":"STRING",
					"localized_name":"filename_prefix"
				},
				{
					"widget":{
						"name":"format"
					},
					"name":"format",
					"label":"format",
					"type":"COMBO",
					"localized_name":"format"
				},
				{
					"widget":{
						"name":"pingpong"
					},
					"name":"pingpong",
					"label":"pingpong",
					"type":"BOOLEAN",
					"localized_name":"pingpong"
				},
				{
					"widget":{
						"name":"save_output"
					},
					"name":"save_output",
					"label":"save_output",
					"type":"BOOLEAN",
					"localized_name":"save_output"
				},
				{
					"widget":{
						"name":"no_preview"
					},
					"shape":7,
					"name":"no_preview",
					"label":"no_preview",
					"type":"BOOLEAN",
					"localized_name":"no_preview"
				}
			],
			"flags":{
				
			},
			"id":58,
			"type":"VHS_VideoCombine",
			"properties":{
				"cnr_id":"comfyui-videohelpersuite",
				"ver":"0edce8ef7ce173ac97a3ed3d6f4636029d1a4530",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"VHS_VideoCombine"
			},
			"order":41
		},
		{
			"outputs":[
				{
					"name":"*",
					"type":"*"
				}
			],
			"color":"#2a363b",
			"widgets_values":[
				"ipimg"
			],
			"inputs":[
				{
					"name":"IMAGE",
					"link":145,
					"type":"IMAGE"
				}
			],
			"flags":{
				
			},
			"type":"SetNode",
			"title":"Set_ipimg",
			"mode":0,
			"bgcolor":"#3f5159",
			"size":[
				210,
				60
			],
			"pos":[
				464.8809509277344,
				1058.863525390625
			],
			"id":82,
			"properties":{
				"previousName":"ipimg"
			},
			"order":33
		},
		{
			"outputs":[
				{
					"name":"*",
					"type":"*"
				}
			],
			"color":"#2a363b",
			"widgets_values":[
				"refimg"
			],
			"inputs":[
				{
					"name":"IMAGE",
					"link":146,
					"type":"IMAGE"
				}
			],
			"flags":{
				
			},
			"type":"SetNode",
			"title":"Set_refimg",
			"mode":0,
			"bgcolor":"#3f5159",
			"size":[
				210,
				58
			],
			"pos":[
				465.46551513671875,
				1169.8338623046875
			],
			"id":83,
			"properties":{
				"previousName":"refimg"
			},
			"order":35
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"lynx_face_embeds",
					"links":[
						126
					],
					"label":"lynx_face_embeds",
					"type":"LYNXIP",
					"localized_name":"lynx_face_embeds"
				}
			],
			"size":[
				198.4499969482422,
				46
			],
			"pos":[
				1020.4235229492188,
				1221.8775634765625
			],
			"widgets_values":[
				
			],
			"inputs":[
				{
					"name":"resampler",
					"link":144,
					"label":"resampler",
					"type":"LYNXRESAMPLER",
					"localized_name":"resampler"
				},
				{
					"name":"ip_image",
					"link":147,
					"label":"ip_image",
					"type":"IMAGE",
					"localized_name":"ip_image"
				}
			],
			"flags":{
				
			},
			"id":52,
			"type":"LynxEncodeFaceIP",
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"174cba575912a534e8c106c0c318c48f3df0e053",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"LynxEncodeFaceIP"
			},
			"order":26
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"WANVIDIMAGE_EMBEDS",
					"links":[
						150
					],
					"type":"WANVIDIMAGE_EMBEDS"
				}
			],
			"size":[
				210,
				60
			],
			"pos":[
				897.9537963867188,
				45.92097091674805
			],
			"widgets_values":[
				"image_embeds"
			],
			"inputs":[
				
			],
			"flags":{
				
			},
			"id":87,
			"type":"GetNode",
			"title":"Get_image_embeds",
			"properties":{
				
			},
			"order":20
		},
		{
			"outputs":[
				{
					"name":"model",
					"links":[
						141
					],
					"label":"model",
					"type":"WANVIDEOMODEL",
					"localized_name":"model"
				}
			],
			"color":"#223",
			"widgets_values":[
				
			],
			"inputs":[
				{
					"name":"model",
					"link":119,
					"label":"model",
					"type":"WANVIDEOMODEL",
					"localized_name":"model"
				},
				{
					"shape":7,
					"name":"block_swap_args",
					"link":36,
					"label":"block_swap_args",
					"type":"BLOCKSWAPARGS",
					"localized_name":"block_swap_args"
				}
			],
			"flags":{
				
			},
			"type":"WanVideoSetBlockSwap",
			"mode":0,
			"bgcolor":"#335",
			"size":[
				284.5798034667969,
				46
			],
			"pos":[
				317.5401611328125,
				512.2332763671875
			],
			"id":28,
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"37365817e82c3d6057fcb0a5d7f952f7376f096a",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"WanVideoSetBlockSwap"
			},
			"order":40
		},
		{
			"outputs":[
				{
					"name":"extra_model",
					"links":[
						135
					],
					"label":"extra_model",
					"type":"VACEPATH",
					"localized_name":"extra_model"
				}
			],
			"color":"#223",
			"widgets_values":[
				"Lynx/Wan2_1-T2V-14B-Lynx_full_ref_layers_fp16.safetensors"
			],
			"inputs":[
				{
					"shape":7,
					"name":"prev_model",
					"link":134,
					"label":"prev_model",
					"type":"VACEPATH",
					"localized_name":"prev_model"
				},
				{
					"widget":{
						"name":"extra_model"
					},
					"name":"extra_model",
					"label":"extra_model",
					"type":"COMBO",
					"localized_name":"extra_model"
				}
			],
			"flags":{
				
			},
			"type":"WanVideoExtraModelSelect",
			"mode":0,
			"bgcolor":"#335",
			"size":[
				426.79119873046875,
				58
			],
			"pos":[
				-478.7793884277344,
				128.30203247070312
			],
			"id":13,
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"37365817e82c3d6057fcb0a5d7f952f7376f096a",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"WanVideoExtraModelSelect"
			},
			"order":23
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"image_embeds",
					"links":[
						101
					],
					"label":"image_embeds",
					"type":"WANVIDIMAGE_EMBEDS",
					"localized_name":"image_embeds"
				}
			],
			"size":[
				272.431640625,
				126
			],
			"pos":[
				761.2564697265625,
				1027.818359375
			],
			"widgets_values":[
				832,
				480,
				81
			],
			"inputs":[
				{
					"shape":7,
					"name":"control_embeds",
					"label":"control_embeds",
					"type":"WANVIDIMAGE_EMBEDS",
					"localized_name":"control_embeds"
				},
				{
					"shape":7,
					"name":"extra_latents",
					"label":"extra_latents",
					"type":"LATENT",
					"localized_name":"extra_latents"
				},
				{
					"widget":{
						"name":"width"
					},
					"name":"width",
					"label":"width",
					"type":"INT",
					"localized_name":"width"
				},
				{
					"widget":{
						"name":"height"
					},
					"name":"height",
					"label":"height",
					"type":"INT",
					"localized_name":"height"
				},
				{
					"widget":{
						"name":"num_frames"
					},
					"name":"num_frames",
					"label":"num_frames",
					"type":"INT",
					"localized_name":"num_frames"
				}
			],
			"flags":{
				
			},
			"id":24,
			"type":"WanVideoEmptyEmbeds",
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"37365817e82c3d6057fcb0a5d7f952f7376f096a",
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"WanVideoEmptyEmbeds"
			},
			"order":21
		}
	],
	"extra":{
		"VHS_KeepIntermediate":true,
		"links_added_by_ue":[
			
		],
		"VHS_MetadataImage":true,
		"ue_links":[
			
		],
		"0246.VERSION":[
			0,
			0,
			4
		],
		"VHS_latentpreviewrate":0,
		"frontendVersion":"1.28.1",
		"VHS_latentpreview":true,
		"node_versions":{
			"ComfyUI-WanVideoWrapper":"1ba1a1662b2db34969c4dbe2d13d8a4780491d30",
			"comfyui-videohelpersuite":"8e4d79471bf1952154768e8435a9300077b534fa",
			"ComfyUI-KJNodes":"9d7af919b91838fb22e31ad0107a6ddcf8bd7f3f",
			"comfy-core":"0.3.61"
		},
		"ds":{
			"offset":[
				406.28745706067605,
				-66.35639519524572
			],
			"scale":0.25937424601000053
		}
	},
	"groups":[
		{
			"color":"#3f789e",
			"font_size":24,
			"flags":{
				
			},
			"id":1,
			"title":"model load",
			"bounding":[
				-495.28558349609375,
				-51.239933013916016,
				1109.4288330078125,
				969.7684326171875
			]
		},
		{
			"color":"#3f789e",
			"font_size":24,
			"flags":{
				
			},
			"id":2,
			"title":"ref image",
			"bounding":[
				-514.767822265625,
				951.0899047851562,
				1207.3753662109375,
				594.907470703125
			]
		},
		{
			"color":"#3f789e",
			"font_size":24,
			"flags":{
				
			},
			"id":3,
			"title":"lynx embeds",
			"bounding":[
				743.5730590820312,
				954.2183227539062,
				871.478515625,
				831.5565185546875
			]
		},
		{
			"color":"#3f789e",
			"font_size":24,
			"flags":{
				
			},
			"id":4,
			"title":"sampling",
			"bounding":[
				640.40771484375,
				-44.703033447265625,
				1160.25439453125,
				961.7359619140625
			]
		}
	],
	"links":[
		[
			31,
			26,
			0,
			22,
			2,
			"WANVIDEOTEXTEMBEDS"
		],
		[
			36,
			29,
			0,
			28,
			1,
			"BLOCKSWAPARGS"
		],
		[
			40,
			22,
			0,
			32,
			1,
			"LATENT"
		],
		[
			101,
			24,
			0,
			55,
			0,
			"WANVIDIMAGE_EMBEDS"
		],
		[
			109,
			32,
			0,
			57,
			0,
			"IMAGE"
		],
		[
			112,
			57,
			0,
			58,
			0,
			"IMAGE"
		],
		[
			113,
			53,
			0,
			21,
			0,
			"IMAGE"
		],
		[
			114,
			53,
			1,
			36,
			0,
			"IMAGE"
		],
		[
			117,
			12,
			0,
			60,
			0,
			"WANVIDEOMODEL"
		],
		[
			119,
			60,
			0,
			28,
			0,
			"WANVIDEOMODEL"
		],
		[
			120,
			35,
			0,
			61,
			0,
			"*"
		],
		[
			121,
			61,
			0,
			53,
			0,
			"IMAGE"
		],
		[
			122,
			62,
			0,
			57,
			1,
			"IMAGE"
		],
		[
			126,
			52,
			0,
			55,
			2,
			"LYNXIP"
		],
		[
			134,
			69,
			0,
			13,
			0,
			"VACEPATH"
		],
		[
			135,
			13,
			0,
			12,
			4,
			"VACEPATH"
		],
		[
			136,
			51,
			0,
			55,
			4,
			"WANVIDEOTEXTEMBEDS"
		],
		[
			139,
			74,
			0,
			60,
			1,
			"WANVIDLORA"
		],
		[
			140,
			32,
			0,
			77,
			0,
			"IMAGE"
		],
		[
			141,
			28,
			0,
			78,
			0,
			"*"
		],
		[
			142,
			31,
			0,
			79,
			0,
			"*"
		],
		[
			143,
			16,
			0,
			80,
			0,
			"*"
		],
		[
			144,
			81,
			0,
			52,
			0,
			"LYNXRESAMPLER"
		],
		[
			145,
			53,
			0,
			82,
			0,
			"*"
		],
		[
			146,
			53,
			1,
			83,
			0,
			"*"
		],
		[
			147,
			84,
			0,
			52,
			1,
			"IMAGE"
		],
		[
			148,
			85,
			0,
			55,
			3,
			"IMAGE"
		],
		[
			149,
			55,
			0,
			86,
			0,
			"*"
		],
		[
			150,
			87,
			0,
			22,
			1,
			"WANVIDIMAGE_EMBEDS"
		],
		[
			151,
			88,
			0,
			22,
			0,
			"WANVIDEOMODEL"
		],
		[
			152,
			89,
			0,
			32,
			0,
			"WANVAE"
		],
		[
			153,
			90,
			0,
			55,
			1,
			"WANVAE"
		]
	],
	"id":"7200c272-1c07-4834-9c36-c6ec5c140c21",
	"config":{
		
	},
	"version":0.4,
	"last_node_id":90,
	"revision":0
}